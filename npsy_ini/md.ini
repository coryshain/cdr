[data]
series_ids = subject docid fROI
split_ids = splitVal15
modulus = 4
X_train = ../data/fMRI_ns/MD_X.csv;../data/fMRI_ns/MD_SP.csv
X_dev = ../data/fMRI_ns/MD_X.csv;../data/fMRI_ns/MD_SP.csv
X_test = ../data/fMRI_ns/MD_X.csv;../data/fMRI_ns/MD_SP.csv
y_train = ../data/fMRI_ns/MD_y_train.csv
y_dev = ../data/fMRI_ns/MD_y_dev.csv
y_test = ../data/fMRI_ns/MD_y_test.csv
history_length = 256

[global_settings]
outdir = ../results/fMRI_ns_surp/md

[dtsr_settings]
network_type = bayes
declare_priors = True
irf_param_prior_sd = 1
n_samples = 1
n_iter = 100000
optim = Nadam
learning_rate = .001
ema_decay = 0.999
minibatch_size = 1024
eval_minibatch_size = 100000
log_freq = 100
save_freq = 100
plot_n_time_units = 30
plot_n_time_points = 1000

[irf_name_map]
DiracDelta.s(network)-Terminal.s(network) = Network
HRF-Terminal.rate = Rate
HRF-Terminal.s(soundPower100ms) = Sound Power
HRF-Terminal.s(unigramsurp) = Unigram surprisal
HRF-Terminal.s(fwprob5surp) = 5-gram surprisal
HRF-Terminal.s(totsurp) = PCFG surprisal

[model_DTSR]
ranef_to_fixef_prior_sd_ratio = 1e-1
declare_priors = False
n_samples = 1
ranef_regularizer_name = l2_regularizer
ranef_regularizer_scale = 1.
ablate = fwprob5surp totsurp
formula = BOLD ~ s(tr) + C(rate + s(soundPower100ms) + s(unigramsurp) + s(fwprob5surp) + s(totsurp), HRFDoubleGamma2(irf_id=HRF)) + (s(tr) + C(rate + s(soundPower100ms) + s(unigramsurp) + s(fwprob5surp) + s(totsurp), HRFDoubleGamma2(irf_id=HRF, ran=T)) | fROI) + (1 | subject)

